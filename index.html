<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Metric â‡„ Imperial</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ”¢</text></svg>">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet" />
  <style>
    :root {
      --color-bg-light: #f1f3f4;
      --color-bg-dark: #121212;
      --color-primary: #4285f4;
      --color-text-light: #202124;
      --color-text-dark: #e8eaed;
      --color-bubble-light: #ffffff;
      --color-bubble-dark: #1e1e1e;
    }

    @media (prefers-color-scheme: dark) {
      body {
        background-color: var(--color-bg-dark);
        color: var(--color-text-dark);
      }
      input {
        background-color: #2c2c2c;
        color: #e8eaed;
      }
      .bubble {
        background-color: var(--color-bubble-dark);
      }
    }

    @media (prefers-color-scheme: light) {
      body {
        background-color: var(--color-bg-light);
        color: var(--color-text-light);
      }
      input {
        background-color: #ffffff;
        color: #202124;
      }
      .bubble {
        background-color: var(--color-bubble-light);
      }
    }

    body {
      font-family: 'Roboto', sans-serif;
      margin: 0;
      padding: 2rem;
      transition: background 0.3s ease, color 0.3s ease;
    }

    h2 {
      text-align: center;
      font-weight: 500;
      /* Remove color or set to inherit */
      /* color: var(--color-primary); */
      color: inherit;
      margin-bottom: 2rem;
      font-size: 2rem;
    }

    h3 {
      margin-bottom: 1rem;
      /* color: var(--color-primary); */
      color: inherit;
      font-weight: 500;
      font-size: 1.2rem;
    }


    .container {
      max-width: 960px;
      margin: 0 auto;
    }

    .bubble {
      border-radius: 2rem;
      padding: 1.5rem;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      margin-bottom: 2rem;
      transition: background 0.3s ease;
    }

    .conversion-group {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
    }

    .column {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .input-group {
      display: flex;
      flex-direction: column;
    }

    label {
      font-size: 0.9rem;
      margin-bottom: 0.3rem;
      opacity: 0.8;
    }

    input {
      border: none;
      border-radius: 28px;
      padding: 0.9rem 1.2rem;
      font-size: 1rem;
      outline: none;
      transition: box-shadow 0.2s ease;
      box-shadow: inset 0 0 0 1px rgba(0,0,0,0.1);
    }

    input:focus {
      box-shadow: 0 0 0 2px var(--color-primary);
    }

    /* Search bar styling */
    #searchInput {
      width: 100%;
      padding: 0.8rem 1rem;
      font-size: 1rem;
      border-radius: 28px;
      border: 1px solid #ccc;
      box-sizing: border-box;
      margin: 0 auto 2rem auto;
      max-width: 960px;
      display: block;
      transition: border-color 0.3s ease;
    }

    #searchInput:focus {
      border-color: var(--color-primary);
      outline: none;
    }
  </style>
</head>
<body>

  <h2>Metric â‡„ Imperial</h2>

  <input
    type="search"
    id="searchInput"
    placeholder="Search conversions..."
    autocomplete="off"
  />

  <div class="container">

    <div class="bubble">
      <h3>Distance</h3>
      <div class="conversion-group">
        <div class="column">
          <div class="input-group"><label for="km">Kilometers</label><input type="number" id="km" /></div>
          <div class="input-group"><label for="meters">Meters</label><input type="number" id="meters" /></div>
          <div class="input-group"><label for="cm">Centimeters</label><input type="number" id="cm" /></div>
        </div>
        <div class="column">
          <div class="input-group"><label for="miles">Miles</label><input type="number" id="miles" /></div>
          <div class="input-group"><label for="feet">Feet</label><input type="number" id="feet" /></div>
          <div class="input-group"><label for="inches">Inches</label><input type="number" id="inches" /></div>
        </div>
      </div>
    </div>

    <div class="bubble">
      <h3>Temperature</h3>
      <div class="conversion-group">
        <div class="column">
          <div class="input-group"><label for="celsius">Celsius</label><input type="number" id="celsius" /></div>
        </div>
        <div class="column">
          <div class="input-group"><label for="fahrenheit">Fahrenheit</label><input type="number" id="fahrenheit" /></div>
        </div>
      </div>
    </div>

    <div class="bubble">
      <h3>Weight / Mass</h3>
      <div class="conversion-group">
        <div class="column">
          <div class="input-group"><label for="kg">Kilograms</label><input type="number" id="kg" /></div>
          <div class="input-group"><label for="grams">Grams</label><input type="number" id="grams" /></div>
        </div>
        <div class="column">
          <div class="input-group"><label for="lbs">Pounds</label><input type="number" id="lbs" /></div>
          <div class="input-group"><label for="ounces">Ounces</label><input type="number" id="ounces" /></div>
        </div>
      </div>
    </div>

    <div class="bubble">
      <h3>Volume</h3>
      <div class="conversion-group">
        <div class="column">
          <div class="input-group"><label for="liters">Liters</label><input type="number" id="liters" /></div>
        </div>
        <div class="column">
          <div class="input-group"><label for="gallons">Gallons</label><input type="number" id="gallons" /></div>
        </div>
      </div>
    </div>

    <div class="bubble">
      <h3>Speed</h3>
      <div class="conversion-group">
        <div class="column">
          <div class="input-group"><label for="kmh">Kilometers/hour</label><input type="number" id="kmh" /></div>
        </div>
        <div class="column">
          <div class="input-group"><label for="mph">Miles/hour</label><input type="number" id="mph" /></div>
        </div>
      </div>
    </div>

    <div class="bubble">
      <h3>Area</h3>
      <div class="conversion-group">
        <div class="column">
          <div class="input-group"><label for="sqm">Square meters</label><input type="number" id="sqm" /></div>
          <div class="input-group"><label for="sqkm">Square kilometers</label><input type="number" id="sqkm" /></div>
        </div>
        <div class="column">
          <div class="input-group"><label for="sqft">Square feet</label><input type="number" id="sqft" /></div>
          <div class="input-group"><label for="sqmi">Square miles</label><input type="number" id="sqmi" /></div>
        </div>
      </div>
    </div>

    <div class="bubble">
      <h3>Fuel Economy</h3>
      <div class="conversion-group">
        <div class="column">
          <div class="input-group"><label for="l100km">Liters/100km</label><input type="number" id="l100km" /></div>
        </div>
        <div class="column">
          <div class="input-group"><label for="mpg">Miles per gallon</label><input type="number" id="mpg" /></div>
        </div>
      </div>
    </div>

    <div class="bubble">
      <h3>Pressure</h3>
      <div class="conversion-group">
        <div class="column">
          <div class="input-group"><label for="kpa">Kilopascal</label><input type="number" id="kpa" /></div>
        </div>
        <div class="column">
          <div class="input-group"><label for="psi">PSI</label><input type="number" id="psi" /></div>
        </div>
      </div>
    </div>

    <div class="bubble">
      <h3>Energy</h3>
      <div class="conversion-group">
        <div class="column">
          <div class="input-group"><label for="joules">Joules</label><input type="number" id="joules" /></div>
        </div>
        <div class="column">
          <div class="input-group"><label for="btu">BTUs</label><input type="number" id="btu" /></div>
        </div>
      </div>
    </div>

    <div class="bubble">
      <h3>Force</h3>
      <div class="conversion-group">
        <div class="column">
          <div class="input-group"><label for="newtons">Newtons</label><input type="number" id="newtons" /></div>
        </div>
        <div class="column">
          <div class="input-group"><label for="lbf">Pound-force</label><input type="number" id="lbf" /></div>
        </div>
      </div>
    </div>

  </div>

<script>
  let updating = false;

  const metricInputs = [
    'km', 'meters', 'cm', 'celsius', 'kg', 'grams', 'liters', 'kmh',
    'sqm', 'sqkm', 'l100km', 'kpa', 'joules', 'newtons'
  ];
  const imperialInputs = [
    'miles', 'feet', 'inches', 'fahrenheit', 'lbs', 'ounces', 'gallons', 'mph',
    'sqft', 'sqmi', 'mpg', 'psi', 'btu', 'lbf'
  ];

  // Conversion ratios
  const conversions = {
    km_miles: 0.621371,
    meters_feet: 3.28084,
    cm_inches: 0.393701,
    celsius_fahrenheit: [c => c * 9/5 + 32, f => (f - 32) * 5/9],
    kg_lbs: 2.20462,
    grams_ounces: 0.035274,
    liters_gallons: 0.264172,
    kmh_mph: 0.621371,
    sqm_sqft: 10.7639,
    sqkm_sqmi: 0.386102,
    l100km_mpg: [l => 235.215 / l, m => 235.215 / m],
    kpa_psi: 0.145038,
    joules_btu: 0.000947817,
    newtons_lbf: 0.224809,
  };

  function clearAllExcept(exceptId) {
    if (updating) return;
    updating = true;

    const inputs = document.querySelectorAll('input[type="number"]');
    inputs.forEach(input => {
      if (input.id !== exceptId) {
        input.value = '';
      }
    });

    updating = false;
  }

  function convertDistance(e) {
    if (updating) return;
    updating = true;

    const val = parseFloat(e.target.value);
    if (isNaN(val)) {
      clearAllExcept(e.target.id);
      updating = false;
      return;
    }

    switch (e.target.id) {
      case 'km':
        setValue('miles', val * conversions.km_miles);
        setValue('meters', val * 1000);
        setValue('feet', val * 3280.84);
        setValue('cm', val * 100000);
        setValue('inches', val * 39370.1);
        break;
      case 'meters':
        setValue('km', val / 1000);
        setValue('feet', val * conversions.meters_feet);
        setValue('miles', val / 1609.34);
        setValue('cm', val * 100);
        setValue('inches', val * 39.3701);
        break;
      case 'cm':
        setValue('meters', val / 100);
        setValue('inches', val * conversions.cm_inches);
        setValue('feet', val / 30.48);
        setValue('km', val / 100000);
        setValue('miles', val / 160934);
        break;
      case 'miles':
        setValue('km', val / conversions.km_miles);
        setValue('feet', val * 5280);
        setValue('meters', val * 1609.34);
        setValue('inches', val * 63360);
        setValue('cm', val * 160934);
        break;
      case 'feet':
        setValue('meters', val / conversions.meters_feet);
        setValue('miles', val / 5280);
        setValue('km', val / 3280.84);
        setValue('inches', val * 12);
        setValue('cm', val * 30.48);
        break;
      case 'inches':
        setValue('cm', val / conversions.cm_inches);
        setValue('feet', val / 12);
        setValue('meters', val / 39.3701);
        setValue('km', val / 39370.1);
        setValue('miles', val / 63360);
        break;
    }

    updating = false;
  }

  function convertTemperature(e) {
    if (updating) return;
    updating = true;

    const val = parseFloat(e.target.value);
    if (isNaN(val)) {
      clearAllExcept(e.target.id);
      updating = false;
      return;
    }

    if (e.target.id === 'celsius') {
      setValue('fahrenheit', conversions.celsius_fahrenheit[0](val));
    } else if (e.target.id === 'fahrenheit') {
      setValue('celsius', conversions.celsius_fahrenheit[1](val));
    }

    updating = false;
  }

  function convertWeight(e) {
    if (updating) return;
    updating = true;

    const val = parseFloat(e.target.value);
    if (isNaN(val)) {
      clearAllExcept(e.target.id);
      updating = false;
      return;
    }

    switch(e.target.id) {
      case 'kg':
        setValue('lbs', val * conversions.kg_lbs);
        setValue('grams', val * 1000);
        setValue('ounces', val * 35.274);
        break;
      case 'grams':
        setValue('kg', val / 1000);
        setValue('ounces', val * conversions.grams_ounces);
        setValue('lbs', val / 453.592);
        break;
      case 'lbs':
        setValue('kg', val / conversions.kg_lbs);
        setValue('ounces', val * 16);
        setValue('grams', val * 453.592);
        break;
      case 'ounces':
        setValue('grams', val / conversions.grams_ounces);
        setValue('lbs', val / 16);
        setValue('kg', val / 35.274);
        break;
    }

    updating = false;
  }

  function convertVolume(e) {
    if (updating) return;
    updating = true;

    const val = parseFloat(e.target.value);
    if (isNaN(val)) {
      clearAllExcept(e.target.id);
      updating = false;
      return;
    }

    if (e.target.id === 'liters') {
      setValue('gallons', val * conversions.liters_gallons);
    } else if (e.target.id === 'gallons') {
      setValue('liters', val / conversions.liters_gallons);
    }

    updating = false;
  }

  function convertSpeed(e) {
    if (updating) return;
    updating = true;

    const val = parseFloat(e.target.value);
    if (isNaN(val)) {
      clearAllExcept(e.target.id);
      updating = false;
      return;
    }

    if (e.target.id === 'kmh') {
      setValue('mph', val * conversions.kmh_mph);
    } else if (e.target.id === 'mph') {
      setValue('kmh', val / conversions.kmh_mph);
    }

    updating = false;
  }

  function convertArea(e) {
    if (updating) return;
    updating = true;

    const val = parseFloat(e.target.value);
    if (isNaN(val)) {
      clearAllExcept(e.target.id);
      updating = false;
      return;
    }

    switch(e.target.id) {
      case 'sqm':
        setValue('sqft', val * conversions.sqm_sqft);
        setValue('sqkm', val / 1_000_000);
        setValue('sqmi', val / 2_589_988);
        break;
      case 'sqkm':
        setValue('sqmi', val * conversions.sqkm_sqmi);
        setValue('sqm', val * 1_000_000);
        setValue('sqft', val * 1_000_000 * conversions.sqm_sqft);
        break;
      case 'sqft':
        setValue('sqm', val / conversions.sqm_sqft);
        setValue('sqmi', val / 27_878_400);
        setValue('sqkm', val / (27_878_400 / conversions.sqkm_sqmi));
        break;
      case 'sqmi':
        setValue('sqkm', val / conversions.sqkm_sqmi);
        setValue('sqm', val * 2_589_988);
        setValue('sqft', val * 27_878_400);
        break;
    }

    updating = false;
  }

  function convertFuelEconomy(e) {
    if (updating) return;
    updating = true;

    const val = parseFloat(e.target.value);
    if (isNaN(val) || val === 0) {
      clearAllExcept(e.target.id);
      updating = false;
      return;
    }

    if (e.target.id === 'l100km') {
      setValue('mpg', conversions.l100km_mpg[0](val));
    } else if (e.target.id === 'mpg') {
      setValue('l100km', conversions.l100km_mpg[1](val));
    }

    updating = false;
  }

  function convertPressure(e) {
    if (updating) return;
    updating = true;

    const val = parseFloat(e.target.value);
    if (isNaN(val)) {
      clearAllExcept(e.target.id);
      updating = false;
      return;
    }

    if (e.target.id === 'kpa') {
      setValue('psi', val * conversions.kpa_psi);
    } else if (e.target.id === 'psi') {
      setValue('kpa', val / conversions.kpa_psi);
    }

    updating = false;
  }

  function convertEnergy(e) {
    if (updating) return;
    updating = true;

    const val = parseFloat(e.target.value);
    if (isNaN(val)) {
      clearAllExcept(e.target.id);
      updating = false;
      return;
    }

    if (e.target.id === 'joules') {
      setValue('btu', val * conversions.joules_btu);
    } else if (e.target.id === 'btu') {
      setValue('joules', val / conversions.joules_btu);
    }

    updating = false;
  }

  function convertForce(e) {
    if (updating) return;
    updating = true;

    const val = parseFloat(e.target.value);
    if (isNaN(val)) {
      clearAllExcept(e.target.id);
      updating = false;
      return;
    }

    if (e.target.id === 'newtons') {
      setValue('lbf', val * conversions.newtons_lbf);
    } else if (e.target.id === 'lbf') {
      setValue('newtons', val / conversions.newtons_lbf);
    }

    updating = false;
  }

  function setValue(id, val) {
    const input = document.getElementById(id);
    if (!input) return;
    input.value = isNaN(val) ? '' : (Math.round(val * 1000000) / 1000000);
  }

  // Attach event listeners
  ['km', 'meters', 'cm', 'miles', 'feet', 'inches'].forEach(id => {
    document.getElementById(id).addEventListener('input', convertDistance);
  });

  ['celsius', 'fahrenheit'].forEach(id => {
    document.getElementById(id).addEventListener('input', convertTemperature);
  });

  ['kg', 'grams', 'lbs', 'ounces'].forEach(id => {
    document.getElementById(id).addEventListener('input', convertWeight);
  });

  ['liters', 'gallons'].forEach(id => {
    document.getElementById(id).addEventListener('input', convertVolume);
  });

  ['kmh', 'mph'].forEach(id => {
    document.getElementById(id).addEventListener('input', convertSpeed);
  });

  ['sqm', 'sqkm', 'sqft', 'sqmi'].forEach(id => {
    document.getElementById(id).addEventListener('input', convertArea);
  });

  ['l100km', 'mpg'].forEach(id => {
    document.getElementById(id).addEventListener('input', convertFuelEconomy);
  });

  ['kpa', 'psi'].forEach(id => {
    document.getElementById(id).addEventListener('input', convertPressure);
  });

  ['joules', 'btu'].forEach(id => {
    document.getElementById(id).addEventListener('input', convertEnergy);
  });

  ['newtons', 'lbf'].forEach(id => {
    document.getElementById(id).addEventListener('input', convertForce);
  });

  // Search filter
  const searchInput = document.getElementById('searchInput');

  searchInput.addEventListener('input', () => {
  const filter = searchInput.value.toLowerCase();

  const bubbles = document.querySelectorAll('.bubble');

  bubbles.forEach(bubble => {
    const inputGroups = bubble.querySelectorAll('.input-group');

    // Check if any label inside this bubble matches the filter
    const anyMatch = Array.from(inputGroups).some(group => {
      const label = group.querySelector('label').textContent.toLowerCase();
      return label.includes(filter);
    });

    if (anyMatch) {
      // Show the whole bubble (all inputs in this group)
      bubble.style.display = 'block';
    } else {
      // Hide the entire bubble
      bubble.style.display = 'none';

      // Also clear inputs in this bubble to avoid leftover values
      inputGroups.forEach(group => {
        const input = group.querySelector('input');
        if (input) input.value = '';
      });
    }
  });
});
</script>

</body>
</html>
